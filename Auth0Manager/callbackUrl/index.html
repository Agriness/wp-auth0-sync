<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Redirecting...</title>
    <meta name="description" lang="pt-BR" content="...">
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
    <script type="text/javascript">

      function parseQuery(query) {

        if (!query) {
          return;
        }

        var queryObject = {};
        query = query.split('?');
        query = query[1].split('&');

        query.forEach(function(item) {
          var objKey = item.split('=');
          var camelCaseKey = objKey[0].split('_');
          camelCaseKey = camelCaseKey.map(function(item) {
            return item.charAt(0).toUpperCase() + item.slice(1);
          });
          camelCaseKey = camelCaseKey.join('');
          camelCaseKey = camelCaseKey.charAt(0).toLowerCase() + camelCaseKey.slice(1);
          queryObject[camelCaseKey] = decodeURIComponent(objKey[1].replace(/%22/g, ''));
        });

        return queryObject;
      }

      function parseHash(hash) {

        if (!hash) {
          return;
        }

        var hashObject = {};
        hash = hash.split('#');
        hash = hash[1].split('&');

        hash.forEach(function(item) {
          var objKey = item.split('=');
          var camelCaseKey = objKey[0].split('_');
          camelCaseKey = camelCaseKey.map(function(item) {
            return item.charAt(0).toUpperCase() + item.slice(1);
          });
          camelCaseKey = camelCaseKey.join('');
          camelCaseKey = camelCaseKey.charAt(0).toLowerCase() + camelCaseKey.slice(1);
          hashObject[camelCaseKey] = decodeURIComponent(objKey[1]);
        });

        return hashObject;
      }

      var params = parseHash(location.hash);

      location.href = params.state + '?idToken=' + params.idToken;

    </script>
  </head>
  <body>Redirecting...</body>
</html>
